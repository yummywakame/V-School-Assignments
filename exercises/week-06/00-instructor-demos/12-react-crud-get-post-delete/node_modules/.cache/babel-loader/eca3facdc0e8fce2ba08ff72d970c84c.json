{"ast":null,"code":"import _toConsumableArray from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/src/context/ToDoProvider.js\";\nimport React from 'react';\nimport axios from 'axios';\nvar TodoContext = React.createContext();\n\nvar TodoProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TodoProvider, _React$Component);\n\n  function TodoProvider() {\n    var _this;\n\n    _classCallCheck(this, TodoProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TodoProvider).call(this));\n\n    _this.getTodos = function () {\n      axios.get(_this.url).then(function (response) {\n        //resolve\n        _this.setState({\n          todos: response.data\n        });\n      }) //reject\n      .catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.addToto = function (inputs) {\n      var title = inputs.title,\n          description = inputs.description,\n          price = inputs.price,\n          imgUrl = inputs.imgUrl; // POST request\n      // Create OBJ\n\n      var newTodo = {\n        title: title,\n        description: description,\n        price: price,\n        imgUrl: imgUrl\n      };\n      axios.post(\"https://api.vschool.io/pauline/todo\", newTodo).then(function (response) {\n        // update state \n        _this.setState(function (prevState) {\n          return {\n            todos: [response.data].concat(_toConsumableArray(prevState.todos))\n          };\n        }); // todos: maintain old todos, and add in new todo from DB\n        // input Values: Reset back to empty strings\n\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.handleDelete = function (_id) {\n      // DELETE\n      // axios.delete a specific Todo via it's ID\n      axios.delete(\"https://api.vschool.io/pauline/todo/\".concat(_id)).then(function (response) {\n        _this.setState(function (prevState) {\n          return {\n            // Take the previous array of todos, and only return\n            // todos that don't have the _id of the deleted one\n            todos: prevState.todos.filter(function (todo) {\n              return todo._id !== _id;\n            })\n          };\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.state = {\n      todos: []\n    };\n    _this.url = \"https://api.vschool.io/pauline/todo\";\n    return _this;\n  }\n\n  _createClass(TodoProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(TodoContext.Provider, {\n        value: {\n          todos: this.state.todos,\n          getTodos: this.state.getTodos,\n          addTodo: this.state.addTodo,\n          handleDelete: this.state.handleDelete\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return TodoProvider;\n}(React.Component);\n\nexport var withTodos = function withTodos(C) {\n  return function (props) {\n    return React.createElement(TodoContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, function (value) {\n      return React.createElement(C, Object.assign({}, props, value, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }));\n    });\n  };\n};\nexport default TodoProvider;","map":{"version":3,"sources":["/Users/omeiring/dev/assignments/exercises/week-06/00-instructor-demos/12-react-crud-get-post-delete/src/context/ToDoProvider.js"],"names":["React","axios","TodoContext","createContext","TodoProvider","getTodos","get","url","then","response","setState","todos","data","catch","error","console","log","addToto","inputs","title","description","price","imgUrl","newTodo","post","prevState","handleDelete","_id","delete","filter","todo","state","addTodo","props","children","Component","withTodos","C","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\n\nconst TodoContext = React.createContext()\n\nclass TodoProvider extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            todos: []\n        }\n        this.url = \"https://api.vschool.io/pauline/todo\"\n    }\n    \n    getTodos = () => {\n        axios.get(this.url).then(response => {\n        //resolve\n            this.setState({\n                todos: response.data\n            })\n       }) //reject\n       .catch(error => console.log(error))\n    }\n    \n    addToto = (inputs) => {\n        const { title, description, price, imgUrl } = inputs\n        // POST request\n            // Create OBJ\n        const newTodo = { title, description, price, imgUrl }\n\n        axios.post(\"https://api.vschool.io/pauline/todo\", newTodo).then(response => {\n            // update state \n            this.setState(prevState => {\n                return {\n                    todos: [response.data, ...prevState.todos]\n                }\n            })\n            // todos: maintain old todos, and add in new todo from DB\n            // input Values: Reset back to empty strings\n        }).catch(error => console.log(error))\n    }\n    \n    handleDelete = (_id) => {\n        // DELETE\n        // axios.delete a specific Todo via it's ID\n        axios.delete(`https://api.vschool.io/pauline/todo/${_id}`).then(response => {\n            this.setState(prevState => {\n                return {\n                    // Take the previous array of todos, and only return\n                    // todos that don't have the _id of the deleted one\n                    todos: prevState.todos.filter(todo => todo._id !== _id)\n                }\n            })    \n        }).catch(error => console.log(error))\n    }\n    \n    render() {\n        return (\n            <TodoContext.Provider value={{\n                todos: this.state.todos,\n                getTodos: this.state.getTodos,\n                addTodo: this.state.addTodo,\n                handleDelete: this.state.handleDelete\n            }}>\n                { this.props.children }\n            </TodoContext.Provider>\n        )\n    }\n}\n\nexport const withTodos = (C) => (props) => (\n    <TodoContext.Consumer>\n        {value => <C {...props} {...value}/>}\n    </TodoContext.Consumer>\n)\n\nexport default TodoProvider"]},"metadata":{},"sourceType":"module"}